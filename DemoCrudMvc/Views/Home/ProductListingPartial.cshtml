@model List<DAL.DataModels.Product>
<div class="container-fluid mt-4 ">
    
    <div class=" row gap-5">
       
        @foreach (var product in Model)
        {
            <div class="d-flex flex-column border border-2 rounded-2  shadow-lg col-md-4" style="width:250px;">
                <div class="card-image  ">
                    <div class="image-slider " id="slider-@product.ProductId">
                        @foreach (var photo in product.ProductPhotos)
                        {
                            <img class="slider-image @(photo == product.ProductPhotos.First() ? "active" : "")" src="~/uploads/@photo.PhotoName" alt="@product.ProductName">
                        }
                    </div>
                </div>
                <div class="card-inner p-3">
                    @* <input type="text" asp-for="@"> *@
                    <span class="text-muted">@product.Category.CategoryName</span>
                    <h5 class="mb-0">@product.ProductName</h5>
                    <div class="price mt-2">
                        <span class="text-primary">$@product.Price</span>
                    </div>
                    <div class="mt-3 d-flex justify-content-between align-items-center">
                        <a class="btn btn-success text-uppercase btn-sm details fw-bolder" asp-action="ProductDetails" asp-controller="Home" asp-route-id="@product.ProductId">Details</a>
                        <div class="d-flex flex-row">
                            @if (product.Quantity == 0)
                            {
                                <span class="text-danger ">Its Out Of Stocks</span>
                            }
                            else
                            {
                                <span class="bg-success  d-flex justify-content-center align-items-center fs-4 rounded-circle pe-auto cart" onclick="ChangeCart(@product.ProductId)"><i class="fa fa-shopping-cart text-white"></i></span>

                            }
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
<script>
    if (true) {
        const sliders = document.querySelectorAll('.image-slider');

        sliders.forEach(slider => {
            let currentIndex = 0;
            const images = slider.querySelectorAll('.slider-image');
            const totalImages = images.length;

            setInterval(() => {
                images[currentIndex].classList.remove('active');
                currentIndex = (currentIndex + 1) % totalImages;
                images[currentIndex].classList.add('active');
            }, 4000);
        });
    }

</script>
